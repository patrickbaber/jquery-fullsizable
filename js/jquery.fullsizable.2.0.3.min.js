/*
jQuery fullsizable plugin v2.0.3 <https://github.com/MSchmidt/jquery-fullsizable>
(c) 2011-2014 Matthias Schmidt <http://m-schmidt.eu/>
*/
(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L;e=jQuery;s="#jquery-fullsizable";l="#fullsized_image_holder";N="fullsized_spinner";t=e('<div id="jquery-fullsizable"><div id="fullsized_image_holder"></div></div>');c=[];u=[];o=0;y=null;C=null;S=function(){var t;t=c[o];if(t.ratio==null){t.ratio=(t.naturalHeight/t.naturalWidth).toFixed(2)}if(e(window).height()/t.ratio>e(window).width()){e(t).width(e(window).width());e(t).height(e(window).width()*t.ratio);return e(t).css("margin-top",(e(window).height()-e(t).height())/2)}else{e(t).height(e(window).height());e(t).width(e(window).height()/t.ratio);return e(t).css("margin-top",0)}};h=function(e){if(e.keyCode===27){i()}if(e.keyCode===37){E(true)}if(e.keyCode===39){return m(true)}};E=function(t){var n;if(t==null){t=false}if(o>0){n=o-1;T(c[n],-1,t);return e(document).trigger("fullsizable:decreased",u[n])}};m=function(t){var n;if(t==null){t=false}if(o<c.length-1){n=o+1;T(c[n],1,t);return e(document).trigger("fullsizable:increased",u[n])}};T=function(t,n,r){if(n==null){n=1}if(r==null){r=false}o=t.index;e(l).hide();e(l).html(t);if(y.navigation){if(r===true){f()}else{x()}}if(t.loaded!=null){e(s).removeClass(N);S();e(l).fadeIn("fast");return b(n)}else{e(s).addClass(N);t.onload=function(){S();e(l).fadeIn("slow",function(){return e(s).removeClass(N)});this.loaded=true;return b(n)};return t.src=t.buffer_src}};b=function(e){var t;if(e===1&&o<c.length-1){t=c[o+1]}else if((e===-1||o===c.length-1)&&o>0){t=c[o-1]}else{return}t.onload=function(){return this.loaded=true};if(t.src===""){return t.src=t.buffer_src}};g=function(r,i){e("body").append(t);e(window).bind("resize",S);T(r);return e(s).hide().fadeIn(function(){if(y.detach_id!=null){C=e(window).scrollTop();e("#"+y.detach_id).css("display","none");S()}n();return e(document).trigger("fullsizable:opened",i)})};i=function(){if(y.detach_id!=null){e("#"+y.detach_id).css("display","block");e(window).scrollTop(C)}e(s).fadeOut(function(){return t.remove()});r();e(s).removeClass(N);L();return e(window).unbind("resize",S)};p=function(){c.length=0;u=e(y.selector).toArray();return e(y.selector).each(function(){var t;t=new Image;t.buffer_src=e(this).attr("href");t.index=c.length;c.push(t);if(y.openOnClick){return e(this).click(function(e){e.preventDefault();if(y.reloadOnOpen){p()}return g(t,this)})}})};w=function(){if(y.navigation){t.append('<a id="fullsized_go_prev" href="#prev"></a><a id="fullsized_go_next" href="#next"></a>');e(document).on("click","#fullsized_go_prev",function(e){e.preventDefault();e.stopPropagation();return E()});e(document).on("click","#fullsized_go_next",function(e){e.preventDefault();e.stopPropagation();return m()})}if(y.closeButton){t.append('<a id="fullsized_close" href="#close"></a>');e(document).on("click","#fullsized_close",function(e){e.preventDefault();e.stopPropagation();return i()})}if(y.fullscreenButton&&a()){t.append('<a id="fullsized_fullscreen" href="#fullscreen"></a>');e(document).on("click","#fullsized_fullscreen",function(e){e.preventDefault();e.stopPropagation();return k()})}switch(y.clickBehaviour){case"close":return e(document).on("click",s,i);case"next":return e(document).on("click",s,function(){return m(true)})}};n=function(){e(document).bind("keydown",h);e(document).bind("fullsizable:next",function(){return m(true)});e(document).bind("fullsizable:prev",function(){return E(true)});return e(document).bind("fullsizable:close",i)};L=function(){e(document).unbind("keydown",h);e(document).unbind("fullsizable:next");e(document).unbind("fullsizable:prev");return e(document).unbind("fullsizable:close")};f=function(){var e;e=t.find("a");if(e.is(":visible")===true){e.toggle(false);return t.bind("mousemove",d)}};v=null;d=function(e){var n;if(v===null){v=[e.clientX,e.clientY]}n=Math.round(Math.sqrt(Math.pow(v[1]-e.clientY,2)+Math.pow(v[0]-e.clientX,2)));if(n>=10){t.unbind("mousemove",d);v=null;return x()}};x=function(){e("#fullsized_close, #fullsized_fullscreen").toggle(true);e("#fullsized_go_prev").toggle(o!==0);return e("#fullsized_go_next").toggle(o!==c.length-1)};e.fn.fullsizable=function(t){y=e.extend({selector:this.selector,detach_id:null,navigation:true,closeButton:true,fullscreenButton:true,openOnClick:true,clickBehaviour:"close",preload:true,reloadOnOpen:false},t||{});w();if(y.preload){p()}e(document).bind("fullsizable:reload",p);e(document).bind("fullsizable:open",function(t,n){var r,i,s,o;if(y.reloadOnOpen){p()}o=[];for(i=0,s=c.length;i<s;i++){r=c[i];if(r.buffer_src===e(n).attr("href")){o.push(g(r,n))}else{o.push(void 0)}}return o});return this};a=function(){var e;e=t.get(0);if(e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen){return true}else{return false}};r=function(){return k(true)};k=function(e){var n;n=t.get(0);if(n.requestFullScreen){if(document.fullScreen||e){return document.exitFullScreen()}else{return n.requestFullScreen()}}else if(n.webkitRequestFullScreen){if(document.webkitIsFullScreen||e){return document.webkitCancelFullScreen()}else{return n.webkitRequestFullScreen()}}else if(n.mozRequestFullScreen){if(document.mozFullScreen||e){return document.mozCancelFullScreen()}else{return n.mozRequestFullScreen()}}}}).call(this);